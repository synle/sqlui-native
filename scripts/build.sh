echo '''
========================================
#<<<<< build.sh >>>>>>>>>>>>>>>>>>>>>>>>>>
========================================
'''

PATCH_VERSION=$(echo "${1:-0}" | tr '[:upper:]' '[:lower:]')
if [ "$PATCH_VERSION" = "1" ] || [ "$PATCH_VERSION" = "true" ]; then
  echo '''
========================================
npm version --no-git-tag-version patch
========================================
'''
  npm version --no-git-tag-version patch
fi

echo '''
========================================
npm install
========================================
'''
npm install

echo '''
========================================
npm run test-ci
========================================
'''
npm run test-ci

echo '''
========================================
npm run build
========================================
'''
npm run build

echo '''
========================================
node scripts/predist.js
========================================
'''
node scripts/predist.js
